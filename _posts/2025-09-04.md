---
layout: post
title: "新机的Linux安装记录"
permalink: /post/20250904
---

出于对Windows软件管理、环境变量、依赖文件的不解，以及神秘的权限控制、频繁的更新，给新电脑装了fedora，也不是旧电脑的Windows+Ubuntu双系统。第一次装的是Ubuntu，不过snap的应用不全，运行环境也独立，其余仍然要用apt管理，很不方便。主要是snap应用修改配置时每次还要到沙箱环境的目录，易与普通的用户变量混淆，也不利于手动修改一些配置文件，于是想尝试其他的Linux发行版。

综合考量后选择了fedora，主要是以下几个因素：
  1. 忠爱Gnome桌面环境，扩展商店和社区也有许多个性化的美工和定制功能
  2. 作为主力机，基本上能开箱即用，不用大量从源码编译
  3. 有活跃的社区支持，也有适当的版本和软件更新

于是在Ubuntu上打了3天的Ballex²之后，重新安装了Fedora Workstation 42。
其实之前并不了解Red Hat系的发行版，于是登入桌面的一瞬间就感到惊喜了：默认的桌面壁纸，大概足够我欣赏一个月了。至少，比某Debian系的默认背景丰富得多。Gnome桌面默认不能放置应用，把应用隐藏在下方，这点我十分喜欢，其他的可以自行安装一些扩展来美化，比如：
  - App Hider
  - ArcMenu
  - Blur my shell
  - Dash to Dock
  - Extension List
  - Removable Drive Menu
  - Top Bar Organizer
  - User Themes

有了User Themes就可以使用用户自定义的主题了。它存放在`~/.local/share/themes`，给新电脑用的是Orchis-Light。图标也可自定义，下载并存放到`~/.local/share/icons`，用了Fluent。在此基础上修改图标，可以制作或下载新的svg文件，使用`ln -s <target> <link>`创建软链，在scalable目录下替换之前的图标。

Fedora Workstation默认使用Ibus输入法。系统用英语安装，后续再添加中文输入法，否则开机界面可能出现乱码。默认的输入法UI十分美观，配置略显不足，可使用`ibus-setup`修改偏好、添加词库、增加可选项。

刚安装的fedora可能会在无法预料之时突然卡死，这是显卡驱动不足导致的。我使用的华硕天选air2025,AMD核显可以自动识别。下载akmod-nvidia后，也能识别到Nvidia的显卡了。之后，这种突然卡死的几率会小很多，不过写文档时还是会习惯实时保存。
随后，是一些linux上常用的应用推荐：
  - Apostrophe  Markdown写作，Flathub源好像已停止更新，可从[Gnome Explore](https://gitlab.gnome.org/explore/projects/starred)下载。
  - Feeds  RSS阅读
  - Gnome Builder  代码编辑（更多针对Gnome开发）
  - GParted  磁盘分区管理
  - Kdenlive  视频剪辑
  - Missioncenter  任务管理器
  - OBS Studio  视频录制
  - V2rayA  VPN服务
  - 网易云音乐  登录的是web端，简约、功能齐全

之后，我尝试通过Steam Proton运行原神,安装和启动都成功了，但由于反作弊机制，不到一分钟就会报设备异常的错误码。不论以怎样的方式，这显然不是长久之计。后来，是在一张闲置的ssd卡安装了Windows to go（Windows10），先从AMD下载安装核显驱动，再从华硕下载安装Nvidia驱动，在硬盘上使用GParted划分一个150GB的ntfs分区，将下载过的游戏文件移动过去。这样，只要开机进入BIOS，选择启动外接ssd的Windows系统，就可以成功运行了。一开始可能无法调节亮度，参考[电脑亮度无法调节](https://www.bilibili.com/video/BV1zZ4y1z7FB/)的神秘手法，竟然成功了。如果安装驱动冲突，突然蓝屏后无法进入系统，只需格式化再刷录一次Windows to go，重新尝试安装驱动。游戏文件不会改变，其余的文件也可以先转移到电脑上备份。

其他Windows软件也可以通过Steam Proton运行。比如FL Studio，可以先将安装包添加至Steam，使用Proton Experimental兼容运行，安装完成后将TARGET替换为`~/.local/share/Steam/steamapps/compatdata/<app_id>/pfx/drive_c/Program Files/Image-Line/FL Studio <year>`下的应用，并添加双引号；START IN替换为TARGET应用的文件目录，就能运行了。如需修改注册表，可以直接在`/~/.local/share/Steam/steamapps/compatdata/<app_id>/pfx`找到user.reg。比如软件的缩放可能存在问题，可以找到Desktop添加LogPixel项。
```
[Control Panel\\Desktop]
"LogPixels"=dword:00000090
```
可以尝试
  - 60 hex = 96 (100%)
  - 78 hex = 120 (125%)
  - 90 hex = 144 (150%)
  - c0 hex = 192 (200%)

修改、添加其他的注册表项，需要保证格式一致，就能正常运行。

---

未解决的问题：电脑剩余电量70%左右时，未插电源可能会死机，多次重启仍无法恢复，只能重新插上电源后恢复。
